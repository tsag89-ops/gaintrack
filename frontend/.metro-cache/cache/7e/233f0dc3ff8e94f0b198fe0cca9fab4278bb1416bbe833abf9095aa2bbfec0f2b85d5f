{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  /*\n   * Copyright 2019 gRPC authors.\n   *\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   *     http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   *\n   */\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.deadlineToString = exports.getRelativeTimeout = exports.getDeadlineTimeoutString = exports.minDeadline = void 0;\n  function minDeadline(...deadlineList) {\n    let minValue = Infinity;\n    for (const deadline of deadlineList) {\n      const deadlineMsecs = deadline instanceof Date ? deadline.getTime() : deadline;\n      if (deadlineMsecs < minValue) {\n        minValue = deadlineMsecs;\n      }\n    }\n    return minValue;\n  }\n  exports.minDeadline = minDeadline;\n  const units = [['m', 1], ['S', 1000], ['M', 60 * 1000], ['H', 60 * 60 * 1000]];\n  function getDeadlineTimeoutString(deadline) {\n    const now = new Date().getTime();\n    if (deadline instanceof Date) {\n      deadline = deadline.getTime();\n    }\n    const timeoutMs = Math.max(deadline - now, 0);\n    for (const [unit, factor] of units) {\n      const amount = timeoutMs / factor;\n      if (amount < 1e8) {\n        return String(Math.ceil(amount)) + unit;\n      }\n    }\n    throw new Error('Deadline is too far in the future');\n  }\n  exports.getDeadlineTimeoutString = getDeadlineTimeoutString;\n  /**\n   * See https://nodejs.org/api/timers.html#settimeoutcallback-delay-args\n   * In particular, \"When delay is larger than 2147483647 or less than 1, the\n   * delay will be set to 1. Non-integer delays are truncated to an integer.\"\n   * This number of milliseconds is almost 25 days.\n   */\n  const MAX_TIMEOUT_TIME = 2147483647;\n  /**\n   * Get the timeout value that should be passed to setTimeout now for the timer\n   * to end at the deadline. For any deadline before now, the timer should end\n   * immediately, represented by a value of 0. For any deadline more than\n   * MAX_TIMEOUT_TIME milliseconds in the future, a timer cannot be set that will\n   * end at that time, so it is treated as infinitely far in the future.\n   * @param deadline\n   * @returns\n   */\n  function getRelativeTimeout(deadline) {\n    const deadlineMs = deadline instanceof Date ? deadline.getTime() : deadline;\n    const now = new Date().getTime();\n    const timeout = deadlineMs - now;\n    if (timeout < 0) {\n      return 0;\n    } else if (timeout > MAX_TIMEOUT_TIME) {\n      return Infinity;\n    } else {\n      return timeout;\n    }\n  }\n  exports.getRelativeTimeout = getRelativeTimeout;\n  function deadlineToString(deadline) {\n    if (deadline instanceof Date) {\n      return deadline.toISOString();\n    } else {\n      const dateDeadline = new Date(deadline);\n      if (Number.isNaN(dateDeadline.getTime())) {\n        return '' + deadline;\n      } else {\n        return dateDeadline.toISOString();\n      }\n    }\n  }\n  exports.deadlineToString = deadlineToString;\n});","lineCount":93,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0],[5,0,3,0],[6,0,4,0],[7,0,5,0],[8,0,6,0],[9,0,7,0],[10,0,8,0],[11,0,9,0],[12,0,10,0],[13,0,11,0],[14,0,12,0],[15,0,13,0],[16,0,14,0],[17,0,15,0],[18,0,16,0],[19,0,17,0],[20,2,18,0,"Object"],[20,8,18,6],[20,9,18,7,"defineProperty"],[20,23,18,21],[20,24,18,22,"exports"],[20,31,18,29],[20,33,18,31],[20,45,18,43],[20,47,18,45],[21,4,18,47,"value"],[21,9,18,52],[21,11,18,54],[22,2,18,59],[22,3,18,60],[22,4,18,61],[23,2,19,0,"exports"],[23,9,19,7],[23,10,19,8,"deadlineToString"],[23,26,19,24],[23,29,19,27,"exports"],[23,36,19,34],[23,37,19,35,"getRelativeTimeout"],[23,55,19,53],[23,58,19,56,"exports"],[23,65,19,63],[23,66,19,64,"getDeadlineTimeoutString"],[23,90,19,88],[23,93,19,91,"exports"],[23,100,19,98],[23,101,19,99,"minDeadline"],[23,112,19,110],[23,115,19,113],[23,120,19,118],[23,121,19,119],[24,2,20,0],[24,11,20,9,"minDeadline"],[24,22,20,20,"minDeadline"],[24,23,20,21],[24,26,20,24,"deadlineList"],[24,38,20,36],[24,40,20,38],[25,4,21,4],[25,8,21,8,"minValue"],[25,16,21,16],[25,19,21,19,"Infinity"],[25,27,21,27],[26,4,22,4],[26,9,22,9],[26,15,22,15,"deadline"],[26,23,22,23],[26,27,22,27,"deadlineList"],[26,39,22,39],[26,41,22,41],[27,6,23,8],[27,12,23,14,"deadlineMsecs"],[27,25,23,27],[27,28,23,30,"deadline"],[27,36,23,38],[27,48,23,50,"Date"],[27,52,23,54],[27,55,23,57,"deadline"],[27,63,23,65],[27,64,23,66,"getTime"],[27,71,23,73],[27,72,23,74],[27,73,23,75],[27,76,23,78,"deadline"],[27,84,23,86],[28,6,24,8],[28,10,24,12,"deadlineMsecs"],[28,23,24,25],[28,26,24,28,"minValue"],[28,34,24,36],[28,36,24,38],[29,8,25,12,"minValue"],[29,16,25,20],[29,19,25,23,"deadlineMsecs"],[29,32,25,36],[30,6,26,8],[31,4,27,4],[32,4,28,4],[32,11,28,11,"minValue"],[32,19,28,19],[33,2,29,0],[34,2,30,0,"exports"],[34,9,30,7],[34,10,30,8,"minDeadline"],[34,21,30,19],[34,24,30,22,"minDeadline"],[34,35,30,33],[35,2,31,0],[35,8,31,6,"units"],[35,13,31,11],[35,16,31,14],[35,17,32,4],[35,18,32,5],[35,21,32,8],[35,23,32,10],[35,24,32,11],[35,25,32,12],[35,27,33,4],[35,28,33,5],[35,31,33,8],[35,33,33,10],[35,37,33,14],[35,38,33,15],[35,40,34,4],[35,41,34,5],[35,44,34,8],[35,46,34,10],[35,48,34,12],[35,51,34,15],[35,55,34,19],[35,56,34,20],[35,58,35,4],[35,59,35,5],[35,62,35,8],[35,64,35,10],[35,66,35,12],[35,69,35,15],[35,71,35,17],[35,74,35,20],[35,78,35,24],[35,79,35,25],[35,80,36,1],[36,2,37,0],[36,11,37,9,"getDeadlineTimeoutString"],[36,35,37,33,"getDeadlineTimeoutString"],[36,36,37,34,"deadline"],[36,44,37,42],[36,46,37,44],[37,4,38,4],[37,10,38,10,"now"],[37,13,38,13],[37,16,38,16],[37,20,38,20,"Date"],[37,24,38,24],[37,25,38,25],[37,26,38,26],[37,27,38,27,"getTime"],[37,34,38,34],[37,35,38,35],[37,36,38,36],[38,4,39,4],[38,8,39,8,"deadline"],[38,16,39,16],[38,28,39,28,"Date"],[38,32,39,32],[38,34,39,34],[39,6,40,8,"deadline"],[39,14,40,16],[39,17,40,19,"deadline"],[39,25,40,27],[39,26,40,28,"getTime"],[39,33,40,35],[39,34,40,36],[39,35,40,37],[40,4,41,4],[41,4,42,4],[41,10,42,10,"timeoutMs"],[41,19,42,19],[41,22,42,22,"Math"],[41,26,42,26],[41,27,42,27,"max"],[41,30,42,30],[41,31,42,31,"deadline"],[41,39,42,39],[41,42,42,42,"now"],[41,45,42,45],[41,47,42,47],[41,48,42,48],[41,49,42,49],[42,4,43,4],[42,9,43,9],[42,15,43,15],[42,16,43,16,"unit"],[42,20,43,20],[42,22,43,22,"factor"],[42,28,43,28],[42,29,43,29],[42,33,43,33,"units"],[42,38,43,38],[42,40,43,40],[43,6,44,8],[43,12,44,14,"amount"],[43,18,44,20],[43,21,44,23,"timeoutMs"],[43,30,44,32],[43,33,44,35,"factor"],[43,39,44,41],[44,6,45,8],[44,10,45,12,"amount"],[44,16,45,18],[44,19,45,21],[44,22,45,24],[44,24,45,26],[45,8,46,12],[45,15,46,19,"String"],[45,21,46,25],[45,22,46,26,"Math"],[45,26,46,30],[45,27,46,31,"ceil"],[45,31,46,35],[45,32,46,36,"amount"],[45,38,46,42],[45,39,46,43],[45,40,46,44],[45,43,46,47,"unit"],[45,47,46,51],[46,6,47,8],[47,4,48,4],[48,4,49,4],[48,10,49,10],[48,14,49,14,"Error"],[48,19,49,19],[48,20,49,20],[48,55,49,55],[48,56,49,56],[49,2,50,0],[50,2,51,0,"exports"],[50,9,51,7],[50,10,51,8,"getDeadlineTimeoutString"],[50,34,51,32],[50,37,51,35,"getDeadlineTimeoutString"],[50,61,51,59],[51,2,52,0],[52,0,53,0],[53,0,54,0],[54,0,55,0],[55,0,56,0],[56,0,57,0],[57,2,58,0],[57,8,58,6,"MAX_TIMEOUT_TIME"],[57,24,58,22],[57,27,58,25],[57,37,58,35],[58,2,59,0],[59,0,60,0],[60,0,61,0],[61,0,62,0],[62,0,63,0],[63,0,64,0],[64,0,65,0],[65,0,66,0],[66,0,67,0],[67,2,68,0],[67,11,68,9,"getRelativeTimeout"],[67,29,68,27,"getRelativeTimeout"],[67,30,68,28,"deadline"],[67,38,68,36],[67,40,68,38],[68,4,69,4],[68,10,69,10,"deadlineMs"],[68,20,69,20],[68,23,69,23,"deadline"],[68,31,69,31],[68,43,69,43,"Date"],[68,47,69,47],[68,50,69,50,"deadline"],[68,58,69,58],[68,59,69,59,"getTime"],[68,66,69,66],[68,67,69,67],[68,68,69,68],[68,71,69,71,"deadline"],[68,79,69,79],[69,4,70,4],[69,10,70,10,"now"],[69,13,70,13],[69,16,70,16],[69,20,70,20,"Date"],[69,24,70,24],[69,25,70,25],[69,26,70,26],[69,27,70,27,"getTime"],[69,34,70,34],[69,35,70,35],[69,36,70,36],[70,4,71,4],[70,10,71,10,"timeout"],[70,17,71,17],[70,20,71,20,"deadlineMs"],[70,30,71,30],[70,33,71,33,"now"],[70,36,71,36],[71,4,72,4],[71,8,72,8,"timeout"],[71,15,72,15],[71,18,72,18],[71,19,72,19],[71,21,72,21],[72,6,73,8],[72,13,73,15],[72,14,73,16],[73,4,74,4],[73,5,74,5],[73,11,75,9],[73,15,75,13,"timeout"],[73,22,75,20],[73,25,75,23,"MAX_TIMEOUT_TIME"],[73,41,75,39],[73,43,75,41],[74,6,76,8],[74,13,76,15,"Infinity"],[74,21,76,23],[75,4,77,4],[75,5,77,5],[75,11,78,9],[76,6,79,8],[76,13,79,15,"timeout"],[76,20,79,22],[77,4,80,4],[78,2,81,0],[79,2,82,0,"exports"],[79,9,82,7],[79,10,82,8,"getRelativeTimeout"],[79,28,82,26],[79,31,82,29,"getRelativeTimeout"],[79,49,82,47],[80,2,83,0],[80,11,83,9,"deadlineToString"],[80,27,83,25,"deadlineToString"],[80,28,83,26,"deadline"],[80,36,83,34],[80,38,83,36],[81,4,84,4],[81,8,84,8,"deadline"],[81,16,84,16],[81,28,84,28,"Date"],[81,32,84,32],[81,34,84,34],[82,6,85,8],[82,13,85,15,"deadline"],[82,21,85,23],[82,22,85,24,"toISOString"],[82,33,85,35],[82,34,85,36],[82,35,85,37],[83,4,86,4],[83,5,86,5],[83,11,87,9],[84,6,88,8],[84,12,88,14,"dateDeadline"],[84,24,88,26],[84,27,88,29],[84,31,88,33,"Date"],[84,35,88,37],[84,36,88,38,"deadline"],[84,44,88,46],[84,45,88,47],[85,6,89,8],[85,10,89,12,"Number"],[85,16,89,18],[85,17,89,19,"isNaN"],[85,22,89,24],[85,23,89,25,"dateDeadline"],[85,35,89,37],[85,36,89,38,"getTime"],[85,43,89,45],[85,44,89,46],[85,45,89,47],[85,46,89,48],[85,48,89,50],[86,8,90,12],[86,15,90,19],[86,17,90,21],[86,20,90,24,"deadline"],[86,28,90,32],[87,6,91,8],[87,7,91,9],[87,13,92,13],[88,8,93,12],[88,15,93,19,"dateDeadline"],[88,27,93,31],[88,28,93,32,"toISOString"],[88,39,93,43],[88,40,93,44],[88,41,93,45],[89,6,94,8],[90,4,95,4],[91,2,96,0],[92,2,97,0,"exports"],[92,9,97,7],[92,10,97,8,"deadlineToString"],[92,26,97,24],[92,29,97,27,"deadlineToString"],[92,45,97,43],[93,0,97,44],[93,3]],"functionMap":{"names":["<global>","minDeadline","getDeadlineTimeoutString","getRelativeTimeout","deadlineToString"],"mappings":"AAA;ACmB;CDS;AEQ;CFa;AGkB;CHa;AIE;CJa"},"hasCjsExports":true},"type":"js/module"}]}