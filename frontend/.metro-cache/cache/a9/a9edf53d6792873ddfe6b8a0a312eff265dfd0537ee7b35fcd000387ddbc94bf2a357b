{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":50},"end":{"line":2,"column":73,"index":123}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":124},"end":{"line":3,"column":62,"index":186}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"../../src/services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":187},"end":{"line":4,"column":49,"index":236}}],"key":"9xSisGHPJraOzXuYGWsxOEoipwY=","exportNames":["*"],"imports":1}},{"name":"../../src/store/authStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":237},"end":{"line":5,"column":57,"index":294}}],"key":"rzvS6mOYLZFvjGcMkfDJcrjZqoQ=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/app/(auth)/callback.tsx\",\n    _s = $RefreshSig$(); // REMINDER: DO NOT HARDCODE THE URL, OR ADD ANY FALLBACKS OR REDIRECT URLS, THIS BREAKS THE AUTH\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return CallbackScreen;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _react = require(_dependencyMap[1], \"react\");\n  var _reactNative = require(_dependencyMap[2], \"react-native\");\n  var _expoRouter = require(_dependencyMap[3], \"expo-router\");\n  var _srcServicesApi = require(_dependencyMap[4], \"../../src/services/api\");\n  var _srcStoreAuthStore = require(_dependencyMap[5], \"../../src/store/authStore\");\n  var _reactJsxDevRuntime = require(_dependencyMap[6], \"react/jsx-dev-runtime\");\n  function CallbackScreen() {\n    _s();\n    var router = (0, _expoRouter.useRouter)();\n    var params = (0, _expoRouter.useLocalSearchParams)();\n    var hasProcessed = (0, _react.useRef)(false);\n    var _useAuthStore = (0, _srcStoreAuthStore.useAuthStore)(),\n      setUser = _useAuthStore.setUser,\n      setSessionToken = _useAuthStore.setSessionToken,\n      setLoading = _useAuthStore.setLoading;\n    (0, _react.useEffect)(() => {\n      var processAuth = /*#__PURE__*/function () {\n        var _ref = (0, _asyncToGenerator.default)(function* () {\n          // Prevent double processing\n          if (hasProcessed.current) return;\n          hasProcessed.current = true;\n          try {\n            // Get session_id from params or URL hash\n            var sessionId = params.session_id;\n            if (!sessionId && typeof window !== 'undefined') {\n              var hash = window.location.hash;\n              var match = hash.match(/session_id=([^&]+)/);\n              sessionId = match ? match[1] : '';\n            }\n            if (!sessionId) {\n              console.error('No session_id found');\n              router.replace('/login');\n              return;\n            }\n\n            // Exchange session_id for session data\n            var data = yield _srcServicesApi.authApi.exchangeSession(sessionId);\n\n            // Store user and token\n            setUser(data.user);\n            setSessionToken(data.session_token);\n\n            // Navigate to main app\n            router.replace('/(tabs)');\n          } catch (error) {\n            console.error('Auth callback error:', error);\n            router.replace('/login');\n          } finally {\n            setLoading(false);\n          }\n        });\n        return function processAuth() {\n          return _ref.apply(this, arguments);\n        };\n      }();\n      processAuth();\n    }, []);\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_reactNative.View, {\n      style: styles.container,\n      children: [/*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_reactNative.ActivityIndicator, {\n        size: \"large\",\n        color: \"#10B981\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 7\n      }, this), /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_reactNative.Text, {\n        style: styles.text,\n        children: \"Signing you in...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 5\n    }, this);\n  }\n  _s(CallbackScreen, \"MgtlNcQYFbTWWrb19DAv30q/5hk=\", false, function () {\n    return [_expoRouter.useRouter, _expoRouter.useLocalSearchParams, _srcStoreAuthStore.useAuthStore];\n  });\n  _c = CallbackScreen;\n  var styles = _reactNative.StyleSheet.create({\n    container: {\n      flex: 1,\n      backgroundColor: '#111827',\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n    text: {\n      color: '#9CA3AF',\n      fontSize: 16,\n      marginTop: 16\n    }\n  });\n  var _c;\n  $RefreshReg$(_c, \"CallbackScreen\");\n});","lineCount":121,"map":[[5,25,7,0],[6,2,7,0,"Object"],[6,8,7,0],[6,9,7,0,"defineProperty"],[6,23,7,0],[6,24,7,0,"exports"],[6,31,7,0],[7,4,7,0,"value"],[7,9,7,0],[8,2,7,0],[9,2,7,0],[9,11,7,0,"_interopDefault"],[9,27,7,0,"e"],[9,28,7,0],[10,4,7,0],[10,11,7,0,"e"],[10,12,7,0],[10,16,7,0,"e"],[10,17,7,0],[10,18,7,0,"__esModule"],[10,28,7,0],[10,31,7,0,"e"],[10,32,7,0],[11,6,7,0,"default"],[11,13,7,0],[11,15,7,0,"e"],[12,4,7,0],[13,2,7,0],[14,2,9,15,"Object"],[14,8,9,15],[14,9,9,15,"defineProperty"],[14,23,9,15],[14,24,9,15,"exports"],[14,31,9,15],[15,4,9,15,"enumerable"],[15,14,9,15],[16,4,9,15,"get"],[16,7,9,15],[16,18,9,15,"get"],[16,19,9,15],[17,6,9,15],[17,13,9,15,"CallbackScreen"],[17,27,9,15],[18,4,9,15],[19,2,9,15],[20,2,63,1],[20,6,63,1,"_babelRuntimeHelpersAsyncToGenerator"],[20,42,63,1],[20,45,63,1,"require"],[20,52,63,1],[20,53,63,1,"_dependencyMap"],[20,67,63,1],[21,2,63,1],[21,6,63,1,"_asyncToGenerator"],[21,23,63,1],[21,26,63,1,"_interopDefault"],[21,41,63,1],[21,42,63,1,"_babelRuntimeHelpersAsyncToGenerator"],[21,78,63,1],[22,2,1,0],[22,6,1,0,"_react"],[22,12,1,0],[22,15,1,0,"require"],[22,22,1,0],[22,23,1,0,"_dependencyMap"],[22,37,1,0],[23,2,2,0],[23,6,2,0,"_reactNative"],[23,18,2,0],[23,21,2,0,"require"],[23,28,2,0],[23,29,2,0,"_dependencyMap"],[23,43,2,0],[24,2,3,0],[24,6,3,0,"_expoRouter"],[24,17,3,0],[24,20,3,0,"require"],[24,27,3,0],[24,28,3,0,"_dependencyMap"],[24,42,3,0],[25,2,4,0],[25,6,4,0,"_srcServicesApi"],[25,21,4,0],[25,24,4,0,"require"],[25,31,4,0],[25,32,4,0,"_dependencyMap"],[25,46,4,0],[26,2,5,0],[26,6,5,0,"_srcStoreAuthStore"],[26,24,5,0],[26,27,5,0,"require"],[26,34,5,0],[26,35,5,0,"_dependencyMap"],[26,49,5,0],[27,2,5,57],[27,6,5,57,"_reactJsxDevRuntime"],[27,25,5,57],[27,28,5,57,"require"],[27,35,5,57],[27,36,5,57,"_dependencyMap"],[27,50,5,57],[28,2,9,15],[28,11,9,24,"CallbackScreen"],[28,25,9,38,"CallbackScreen"],[28,26,9,38],[28,28,9,41],[29,4,9,41,"_s"],[29,6,9,41],[30,4,10,2],[30,8,10,8,"router"],[30,14,10,14],[30,17,10,17],[30,21,10,17,"useRouter"],[30,32,10,26],[30,33,10,26,"useRouter"],[30,42,10,26],[30,44,10,27],[30,45,10,28],[31,4,11,2],[31,8,11,8,"params"],[31,14,11,14],[31,17,11,17],[31,21,11,17,"useLocalSearchParams"],[31,32,11,37],[31,33,11,37,"useLocalSearchParams"],[31,53,11,37],[31,55,11,38],[31,56,11,39],[32,4,12,2],[32,8,12,8,"hasProcessed"],[32,20,12,20],[32,23,12,23],[32,27,12,23,"useRef"],[32,33,12,29],[32,34,12,29,"useRef"],[32,40,12,29],[32,42,12,30],[32,47,12,35],[32,48,12,36],[33,4,13,2],[33,8,13,2,"_useAuthStore"],[33,21,13,2],[33,24,13,51],[33,28,13,51,"useAuthStore"],[33,46,13,63],[33,47,13,63,"useAuthStore"],[33,59,13,63],[33,61,13,64],[33,62,13,65],[34,6,13,10,"setUser"],[34,13,13,17],[34,16,13,17,"_useAuthStore"],[34,29,13,17],[34,30,13,10,"setUser"],[34,37,13,17],[35,6,13,19,"setSessionToken"],[35,21,13,34],[35,24,13,34,"_useAuthStore"],[35,37,13,34],[35,38,13,19,"setSessionToken"],[35,53,13,34],[36,6,13,36,"setLoading"],[36,16,13,46],[36,19,13,46,"_useAuthStore"],[36,32,13,46],[36,33,13,36,"setLoading"],[36,43,13,46],[37,4,15,2],[37,8,15,2,"useEffect"],[37,14,15,11],[37,15,15,11,"useEffect"],[37,24,15,11],[37,26,15,12],[37,32,15,18],[38,6,16,4],[38,10,16,10,"processAuth"],[38,21,16,21],[39,8,16,21],[39,12,16,21,"_ref"],[39,16,16,21],[39,23,16,21,"_asyncToGenerator"],[39,40,16,21],[39,41,16,21,"default"],[39,48,16,21],[39,50,16,24],[39,63,16,36],[40,10,17,6],[41,10,18,6],[41,14,18,10,"hasProcessed"],[41,26,18,22],[41,27,18,23,"current"],[41,34,18,30],[41,36,18,32],[42,10,19,6,"hasProcessed"],[42,22,19,18],[42,23,19,19,"current"],[42,30,19,26],[42,33,19,29],[42,37,19,33],[43,10,21,6],[43,14,21,10],[44,12,22,8],[45,12,23,8],[45,16,23,12,"sessionId"],[45,25,23,21],[45,28,23,24,"params"],[45,34,23,30],[45,35,23,31,"session_id"],[45,45,23,51],[46,12,25,8],[46,16,25,12],[46,17,25,13,"sessionId"],[46,26,25,22],[46,30,25,26],[46,37,25,33,"window"],[46,43,25,39],[46,48,25,44],[46,59,25,55],[46,61,25,57],[47,14,26,10],[47,18,26,16,"hash"],[47,22,26,20],[47,25,26,23,"window"],[47,31,26,29],[47,32,26,30,"location"],[47,40,26,38],[47,41,26,39,"hash"],[47,45,26,43],[48,14,27,10],[48,18,27,16,"match"],[48,23,27,21],[48,26,27,24,"hash"],[48,30,27,28],[48,31,27,29,"match"],[48,36,27,34],[48,37,27,35],[48,57,27,55],[48,58,27,56],[49,14,28,10,"sessionId"],[49,23,28,19],[49,26,28,22,"match"],[49,31,28,27],[49,34,28,30,"match"],[49,39,28,35],[49,40,28,36],[49,41,28,37],[49,42,28,38],[49,45,28,41],[49,47,28,43],[50,12,29,8],[51,12,31,8],[51,16,31,12],[51,17,31,13,"sessionId"],[51,26,31,22],[51,28,31,24],[52,14,32,10,"console"],[52,21,32,17],[52,22,32,18,"error"],[52,27,32,23],[52,28,32,24],[52,49,32,45],[52,50,32,46],[53,14,33,10,"router"],[53,20,33,16],[53,21,33,17,"replace"],[53,28,33,24],[53,29,33,25],[53,37,33,33],[53,38,33,34],[54,14,34,10],[55,12,35,8],[57,12,37,8],[58,12,38,8],[58,16,38,14,"data"],[58,20,38,18],[58,29,38,27,"authApi"],[58,44,38,34],[58,45,38,34,"authApi"],[58,52,38,34],[58,53,38,35,"exchangeSession"],[58,68,38,50],[58,69,38,51,"sessionId"],[58,78,38,60],[58,79,38,61],[60,12,40,8],[61,12,41,8,"setUser"],[61,19,41,15],[61,20,41,16,"data"],[61,24,41,20],[61,25,41,21,"user"],[61,29,41,25],[61,30,41,26],[62,12,42,8,"setSessionToken"],[62,27,42,23],[62,28,42,24,"data"],[62,32,42,28],[62,33,42,29,"session_token"],[62,46,42,42],[62,47,42,43],[64,12,44,8],[65,12,45,8,"router"],[65,18,45,14],[65,19,45,15,"replace"],[65,26,45,22],[65,27,45,23],[65,36,45,32],[65,37,45,33],[66,10,46,6],[66,11,46,7],[66,12,46,8],[66,19,46,15,"error"],[66,24,46,20],[66,26,46,22],[67,12,47,8,"console"],[67,19,47,15],[67,20,47,16,"error"],[67,25,47,21],[67,26,47,22],[67,48,47,44],[67,50,47,46,"error"],[67,55,47,51],[67,56,47,52],[68,12,48,8,"router"],[68,18,48,14],[68,19,48,15,"replace"],[68,26,48,22],[68,27,48,23],[68,35,48,31],[68,36,48,32],[69,10,49,6],[69,11,49,7],[69,20,49,16],[70,12,50,8,"setLoading"],[70,22,50,18],[70,23,50,19],[70,28,50,24],[70,29,50,25],[71,10,51,6],[72,8,52,4],[72,9,52,5],[73,8,52,5],[73,24,16,10,"processAuth"],[73,35,16,21,"processAuth"],[73,36,16,21],[74,10,16,21],[74,17,16,21,"_ref"],[74,21,16,21],[74,22,16,21,"apply"],[74,27,16,21],[74,34,16,21,"arguments"],[74,43,16,21],[75,8,16,21],[76,6,16,21],[76,9,52,5],[77,6,54,4,"processAuth"],[77,17,54,15],[77,18,54,16],[77,19,54,17],[78,4,55,2],[78,5,55,3],[78,7,55,5],[78,9,55,7],[78,10,55,8],[79,4,57,2],[79,24,58,4],[79,28,58,4,"_reactJsxDevRuntime"],[79,47,58,4],[79,48,58,4,"jsxDEV"],[79,54,58,4],[79,56,58,5,"_reactNative"],[79,68,58,9],[79,69,58,9,"View"],[79,73,58,9],[80,6,58,10,"style"],[80,11,58,15],[80,13,58,17,"styles"],[80,19,58,23],[80,20,58,24,"container"],[80,29,58,34],[81,6,58,34,"children"],[81,14,58,34],[81,30,59,6],[81,34,59,6,"_reactJsxDevRuntime"],[81,53,59,6],[81,54,59,6,"jsxDEV"],[81,60,59,6],[81,62,59,7,"_reactNative"],[81,74,59,24],[81,75,59,24,"ActivityIndicator"],[81,92,59,24],[82,8,59,25,"size"],[82,12,59,29],[82,14,59,30],[82,21,59,37],[83,8,59,38,"color"],[83,13,59,43],[83,15,59,44],[84,6,59,53],[85,8,59,53,"fileName"],[85,16,59,53],[85,18,59,53,"_jsxFileName"],[85,30,59,53],[86,8,59,53,"lineNumber"],[86,18,59,53],[87,8,59,53,"columnNumber"],[87,20,59,53],[88,6,59,53],[88,13,59,55],[88,14,59,56],[88,29,60,6],[88,33,60,6,"_reactJsxDevRuntime"],[88,52,60,6],[88,53,60,6,"jsxDEV"],[88,59,60,6],[88,61,60,7,"_reactNative"],[88,73,60,11],[88,74,60,11,"Text"],[88,78,60,11],[89,8,60,12,"style"],[89,13,60,17],[89,15,60,19,"styles"],[89,21,60,25],[89,22,60,26,"text"],[89,26,60,31],[90,8,60,31,"children"],[90,16,60,31],[90,18,60,32],[91,6,60,49],[92,8,60,49,"fileName"],[92,16,60,49],[92,18,60,49,"_jsxFileName"],[92,30,60,49],[93,8,60,49,"lineNumber"],[93,18,60,49],[94,8,60,49,"columnNumber"],[94,20,60,49],[95,6,60,49],[95,13,60,55],[95,14,60,56],[96,4,60,56],[97,6,60,56,"fileName"],[97,14,60,56],[97,16,60,56,"_jsxFileName"],[97,28,60,56],[98,6,60,56,"lineNumber"],[98,16,60,56],[99,6,60,56,"columnNumber"],[99,18,60,56],[100,4,60,56],[100,11,61,10],[100,12,61,11],[101,2,63,0],[102,2,63,1,"_s"],[102,4,63,1],[102,5,9,24,"CallbackScreen"],[102,19,9,38],[103,4,9,38],[103,12,10,17,"useRouter"],[103,23,10,26],[103,24,10,26,"useRouter"],[103,33,10,26],[103,35,11,17,"useLocalSearchParams"],[103,46,11,37],[103,47,11,37,"useLocalSearchParams"],[103,67,11,37],[103,69,13,51,"useAuthStore"],[103,87,13,63],[103,88,13,63,"useAuthStore"],[103,100,13,63],[104,2,13,63],[105,2,13,63,"_c"],[105,4,13,63],[105,7,9,24,"CallbackScreen"],[105,21,9,38],[106,2,65,0],[106,6,65,6,"styles"],[106,12,65,12],[106,15,65,15,"StyleSheet"],[106,27,65,25],[106,28,65,25,"StyleSheet"],[106,38,65,25],[106,39,65,26,"create"],[106,45,65,32],[106,46,65,33],[107,4,66,2,"container"],[107,13,66,11],[107,15,66,13],[108,6,67,4,"flex"],[108,10,67,8],[108,12,67,10],[108,13,67,11],[109,6,68,4,"backgroundColor"],[109,21,68,19],[109,23,68,21],[109,32,68,30],[110,6,69,4,"justifyContent"],[110,20,69,18],[110,22,69,20],[110,30,69,28],[111,6,70,4,"alignItems"],[111,16,70,14],[111,18,70,16],[112,4,71,2],[112,5,71,3],[113,4,72,2,"text"],[113,8,72,6],[113,10,72,8],[114,6,73,4,"color"],[114,11,73,9],[114,13,73,11],[114,22,73,20],[115,6,74,4,"fontSize"],[115,14,74,12],[115,16,74,14],[115,18,74,16],[116,6,75,4,"marginTop"],[116,15,75,13],[116,17,75,15],[117,4,76,2],[118,2,77,0],[118,3,77,1],[118,4,77,2],[119,2,77,3],[119,6,77,3,"_c"],[119,8,77,3],[120,2,77,3,"$RefreshReg$"],[120,14,77,3],[120,15,77,3,"_c"],[120,17,77,3],[121,0,77,3],[121,3]],"functionMap":{"names":["<global>","CallbackScreen","useEffect$argument_0","processAuth"],"mappings":"AAA;eCQ;YCM;wBCC;KDoC;GDG;CDQ"},"hasCjsExports":false},"type":"js/module"}]}