{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/View","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"4kYBDC6LJJXoH7P9rWDi3vkLVB0=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Text","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"JKIzsQ5YQ0gDj0MIyY0Q7F1zJtU=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/StyleSheet","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"MK7+k1V+KnvCVW7Kj2k/ydtjmVU=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/ActivityIndicator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"bSAkUkqZq0shBb5bU6kCYXi4ciA=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":124},"end":{"line":3,"column":62,"index":186}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"../../src/services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":187},"end":{"line":4,"column":49,"index":236}}],"key":"9xSisGHPJraOzXuYGWsxOEoipwY=","exportNames":["*"],"imports":1}},{"name":"../../src/store/authStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":237},"end":{"line":5,"column":57,"index":294}}],"key":"rzvS6mOYLZFvjGcMkfDJcrjZqoQ=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/app/(auth)/callback.tsx\",\n    _s = $RefreshSig$(); // REMINDER: DO NOT HARDCODE THE URL, OR ADD ANY FALLBACKS OR REDIRECT URLS, THIS BREAKS THE AUTH\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return CallbackScreen;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeWebDistExportsView = require(_dependencyMap[1], \"react-native-web/dist/exports/View\");\n  var View = _interopDefault(_reactNativeWebDistExportsView);\n  var _reactNativeWebDistExportsText = require(_dependencyMap[2], \"react-native-web/dist/exports/Text\");\n  var Text = _interopDefault(_reactNativeWebDistExportsText);\n  var _reactNativeWebDistExportsStyleSheet = require(_dependencyMap[3], \"react-native-web/dist/exports/StyleSheet\");\n  var StyleSheet = _interopDefault(_reactNativeWebDistExportsStyleSheet);\n  var _reactNativeWebDistExportsActivityIndicator = require(_dependencyMap[4], \"react-native-web/dist/exports/ActivityIndicator\");\n  var ActivityIndicator = _interopDefault(_reactNativeWebDistExportsActivityIndicator);\n  var _expoRouter = require(_dependencyMap[5], \"expo-router\");\n  var _srcServicesApi = require(_dependencyMap[6], \"../../src/services/api\");\n  var _srcStoreAuthStore = require(_dependencyMap[7], \"../../src/store/authStore\");\n  var _reactJsxDevRuntime = require(_dependencyMap[8], \"react/jsx-dev-runtime\");\n  function CallbackScreen() {\n    _s();\n    const router = (0, _expoRouter.useRouter)();\n    const params = (0, _expoRouter.useLocalSearchParams)();\n    const hasProcessed = (0, _react.useRef)(false);\n    const {\n      setUser,\n      setSessionToken,\n      setLoading\n    } = (0, _srcStoreAuthStore.useAuthStore)();\n    (0, _react.useEffect)(() => {\n      const processAuth = async () => {\n        // Prevent double processing\n        if (hasProcessed.current) return;\n        hasProcessed.current = true;\n        try {\n          // Get session_id from params or URL hash\n          let sessionId = params.session_id;\n          if (!sessionId && typeof window !== 'undefined') {\n            const hash = window.location.hash;\n            const match = hash.match(/session_id=([^&]+)/);\n            sessionId = match ? match[1] : '';\n          }\n          if (!sessionId) {\n            console.error('No session_id found');\n            router.replace('/login');\n            return;\n          }\n\n          // Exchange session_id for session data\n          const data = await _srcServicesApi.authApi.exchangeSession(sessionId);\n\n          // Store user and token\n          setUser(data.user);\n          setSessionToken(data.session_token);\n\n          // Navigate to main app\n          router.replace('/(tabs)');\n        } catch (error) {\n          console.error('Auth callback error:', error);\n          router.replace('/login');\n        } finally {\n          setLoading(false);\n        }\n      };\n      processAuth();\n    }, []);\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(View.default, {\n      style: styles.container,\n      children: [/*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(ActivityIndicator.default, {\n        size: \"large\",\n        color: \"#10B981\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 7\n      }, this), /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(Text.default, {\n        style: styles.text,\n        children: \"Signing you in...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 5\n    }, this);\n  }\n  _s(CallbackScreen, \"MgtlNcQYFbTWWrb19DAv30q/5hk=\", false, function () {\n    return [_expoRouter.useRouter, _expoRouter.useLocalSearchParams, _srcStoreAuthStore.useAuthStore];\n  });\n  _c = CallbackScreen;\n  const styles = StyleSheet.default.create({\n    container: {\n      flex: 1,\n      backgroundColor: '#111827',\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n    text: {\n      color: '#9CA3AF',\n      fontSize: 16,\n      marginTop: 16\n    }\n  });\n  var _c;\n  $RefreshReg$(_c, \"CallbackScreen\");\n});","lineCount":122,"map":[[5,25,7,0],[6,2,7,0,"Object"],[6,8,7,0],[6,9,7,0,"defineProperty"],[6,23,7,0],[6,24,7,0,"exports"],[6,31,7,0],[7,4,7,0,"value"],[7,9,7,0],[8,2,7,0],[9,2,7,0],[9,11,7,0,"_interopDefault"],[9,27,7,0,"e"],[9,28,7,0],[10,4,7,0],[10,11,7,0,"e"],[10,12,7,0],[10,16,7,0,"e"],[10,17,7,0],[10,18,7,0,"__esModule"],[10,28,7,0],[10,31,7,0,"e"],[10,32,7,0],[11,6,7,0,"default"],[11,13,7,0],[11,15,7,0,"e"],[12,4,7,0],[13,2,7,0],[14,2,9,15,"Object"],[14,8,9,15],[14,9,9,15,"defineProperty"],[14,23,9,15],[14,24,9,15,"exports"],[14,31,9,15],[15,4,9,15,"enumerable"],[15,14,9,15],[16,4,9,15,"get"],[16,7,9,15],[16,18,9,15,"get"],[16,19,9,15],[17,6,9,15],[17,13,9,15,"CallbackScreen"],[17,27,9,15],[18,4,9,15],[19,2,9,15],[20,2,1,0],[20,6,1,0,"_react"],[20,12,1,0],[20,15,1,0,"require"],[20,22,1,0],[20,23,1,0,"_dependencyMap"],[20,37,1,0],[21,2,1,49],[21,6,1,49,"_reactNativeWebDistExportsView"],[21,36,1,49],[21,39,1,49,"require"],[21,46,1,49],[21,47,1,49,"_dependencyMap"],[21,61,1,49],[22,2,1,49],[22,6,1,49,"View"],[22,10,1,49],[22,13,1,49,"_interopDefault"],[22,28,1,49],[22,29,1,49,"_reactNativeWebDistExportsView"],[22,59,1,49],[23,2,1,49],[23,6,1,49,"_reactNativeWebDistExportsText"],[23,36,1,49],[23,39,1,49,"require"],[23,46,1,49],[23,47,1,49,"_dependencyMap"],[23,61,1,49],[24,2,1,49],[24,6,1,49,"Text"],[24,10,1,49],[24,13,1,49,"_interopDefault"],[24,28,1,49],[24,29,1,49,"_reactNativeWebDistExportsText"],[24,59,1,49],[25,2,1,49],[25,6,1,49,"_reactNativeWebDistExportsStyleSheet"],[25,42,1,49],[25,45,1,49,"require"],[25,52,1,49],[25,53,1,49,"_dependencyMap"],[25,67,1,49],[26,2,1,49],[26,6,1,49,"StyleSheet"],[26,16,1,49],[26,19,1,49,"_interopDefault"],[26,34,1,49],[26,35,1,49,"_reactNativeWebDistExportsStyleSheet"],[26,71,1,49],[27,2,1,49],[27,6,1,49,"_reactNativeWebDistExportsActivityIndicator"],[27,49,1,49],[27,52,1,49,"require"],[27,59,1,49],[27,60,1,49,"_dependencyMap"],[27,74,1,49],[28,2,1,49],[28,6,1,49,"ActivityIndicator"],[28,23,1,49],[28,26,1,49,"_interopDefault"],[28,41,1,49],[28,42,1,49,"_reactNativeWebDistExportsActivityIndicator"],[28,85,1,49],[29,2,3,0],[29,6,3,0,"_expoRouter"],[29,17,3,0],[29,20,3,0,"require"],[29,27,3,0],[29,28,3,0,"_dependencyMap"],[29,42,3,0],[30,2,4,0],[30,6,4,0,"_srcServicesApi"],[30,21,4,0],[30,24,4,0,"require"],[30,31,4,0],[30,32,4,0,"_dependencyMap"],[30,46,4,0],[31,2,5,0],[31,6,5,0,"_srcStoreAuthStore"],[31,24,5,0],[31,27,5,0,"require"],[31,34,5,0],[31,35,5,0,"_dependencyMap"],[31,49,5,0],[32,2,5,57],[32,6,5,57,"_reactJsxDevRuntime"],[32,25,5,57],[32,28,5,57,"require"],[32,35,5,57],[32,36,5,57,"_dependencyMap"],[32,50,5,57],[33,2,9,15],[33,11,9,24,"CallbackScreen"],[33,25,9,38,"CallbackScreen"],[33,26,9,38],[33,28,9,41],[34,4,9,41,"_s"],[34,6,9,41],[35,4,10,2],[35,10,10,8,"router"],[35,16,10,14],[35,19,10,17],[35,23,10,17,"useRouter"],[35,34,10,26],[35,35,10,26,"useRouter"],[35,44,10,26],[35,46,10,27],[35,47,10,28],[36,4,11,2],[36,10,11,8,"params"],[36,16,11,14],[36,19,11,17],[36,23,11,17,"useLocalSearchParams"],[36,34,11,37],[36,35,11,37,"useLocalSearchParams"],[36,55,11,37],[36,57,11,38],[36,58,11,39],[37,4,12,2],[37,10,12,8,"hasProcessed"],[37,22,12,20],[37,25,12,23],[37,29,12,23,"useRef"],[37,35,12,29],[37,36,12,29,"useRef"],[37,42,12,29],[37,44,12,30],[37,49,12,35],[37,50,12,36],[38,4,13,2],[38,10,13,8],[39,6,13,10,"setUser"],[39,13,13,17],[40,6,13,19,"setSessionToken"],[40,21,13,34],[41,6,13,36,"setLoading"],[42,4,13,47],[42,5,13,48],[42,8,13,51],[42,12,13,51,"useAuthStore"],[42,30,13,63],[42,31,13,63,"useAuthStore"],[42,43,13,63],[42,45,13,64],[42,46,13,65],[43,4,15,2],[43,8,15,2,"useEffect"],[43,14,15,11],[43,15,15,11,"useEffect"],[43,24,15,11],[43,26,15,12],[43,32,15,18],[44,6,16,4],[44,12,16,10,"processAuth"],[44,23,16,21],[44,26,16,24],[44,32,16,24,"processAuth"],[44,33,16,24],[44,38,16,36],[45,8,17,6],[46,8,18,6],[46,12,18,10,"hasProcessed"],[46,24,18,22],[46,25,18,23,"current"],[46,32,18,30],[46,34,18,32],[47,8,19,6,"hasProcessed"],[47,20,19,18],[47,21,19,19,"current"],[47,28,19,26],[47,31,19,29],[47,35,19,33],[48,8,21,6],[48,12,21,10],[49,10,22,8],[50,10,23,8],[50,14,23,12,"sessionId"],[50,23,23,21],[50,26,23,24,"params"],[50,32,23,30],[50,33,23,31,"session_id"],[50,43,23,51],[51,10,25,8],[51,14,25,12],[51,15,25,13,"sessionId"],[51,24,25,22],[51,28,25,26],[51,35,25,33,"window"],[51,41,25,39],[51,46,25,44],[51,57,25,55],[51,59,25,57],[52,12,26,10],[52,18,26,16,"hash"],[52,22,26,20],[52,25,26,23,"window"],[52,31,26,29],[52,32,26,30,"location"],[52,40,26,38],[52,41,26,39,"hash"],[52,45,26,43],[53,12,27,10],[53,18,27,16,"match"],[53,23,27,21],[53,26,27,24,"hash"],[53,30,27,28],[53,31,27,29,"match"],[53,36,27,34],[53,37,27,35],[53,57,27,55],[53,58,27,56],[54,12,28,10,"sessionId"],[54,21,28,19],[54,24,28,22,"match"],[54,29,28,27],[54,32,28,30,"match"],[54,37,28,35],[54,38,28,36],[54,39,28,37],[54,40,28,38],[54,43,28,41],[54,45,28,43],[55,10,29,8],[56,10,31,8],[56,14,31,12],[56,15,31,13,"sessionId"],[56,24,31,22],[56,26,31,24],[57,12,32,10,"console"],[57,19,32,17],[57,20,32,18,"error"],[57,25,32,23],[57,26,32,24],[57,47,32,45],[57,48,32,46],[58,12,33,10,"router"],[58,18,33,16],[58,19,33,17,"replace"],[58,26,33,24],[58,27,33,25],[58,35,33,33],[58,36,33,34],[59,12,34,10],[60,10,35,8],[62,10,37,8],[63,10,38,8],[63,16,38,14,"data"],[63,20,38,18],[63,23,38,21],[63,29,38,27,"authApi"],[63,44,38,34],[63,45,38,34,"authApi"],[63,52,38,34],[63,53,38,35,"exchangeSession"],[63,68,38,50],[63,69,38,51,"sessionId"],[63,78,38,60],[63,79,38,61],[65,10,40,8],[66,10,41,8,"setUser"],[66,17,41,15],[66,18,41,16,"data"],[66,22,41,20],[66,23,41,21,"user"],[66,27,41,25],[66,28,41,26],[67,10,42,8,"setSessionToken"],[67,25,42,23],[67,26,42,24,"data"],[67,30,42,28],[67,31,42,29,"session_token"],[67,44,42,42],[67,45,42,43],[69,10,44,8],[70,10,45,8,"router"],[70,16,45,14],[70,17,45,15,"replace"],[70,24,45,22],[70,25,45,23],[70,34,45,32],[70,35,45,33],[71,8,46,6],[71,9,46,7],[71,10,46,8],[71,17,46,15,"error"],[71,22,46,20],[71,24,46,22],[72,10,47,8,"console"],[72,17,47,15],[72,18,47,16,"error"],[72,23,47,21],[72,24,47,22],[72,46,47,44],[72,48,47,46,"error"],[72,53,47,51],[72,54,47,52],[73,10,48,8,"router"],[73,16,48,14],[73,17,48,15,"replace"],[73,24,48,22],[73,25,48,23],[73,33,48,31],[73,34,48,32],[74,8,49,6],[74,9,49,7],[74,18,49,16],[75,10,50,8,"setLoading"],[75,20,50,18],[75,21,50,19],[75,26,50,24],[75,27,50,25],[76,8,51,6],[77,6,52,4],[77,7,52,5],[78,6,54,4,"processAuth"],[78,17,54,15],[78,18,54,16],[78,19,54,17],[79,4,55,2],[79,5,55,3],[79,7,55,5],[79,9,55,7],[79,10,55,8],[80,4,57,2],[80,24,58,4],[80,28,58,4,"_reactJsxDevRuntime"],[80,47,58,4],[80,48,58,4,"jsxDEV"],[80,54,58,4],[80,56,58,5,"View"],[80,60,58,9],[80,61,58,9,"default"],[80,68,58,9],[81,6,58,10,"style"],[81,11,58,15],[81,13,58,17,"styles"],[81,19,58,23],[81,20,58,24,"container"],[81,29,58,34],[82,6,58,34,"children"],[82,14,58,34],[82,30,59,6],[82,34,59,6,"_reactJsxDevRuntime"],[82,53,59,6],[82,54,59,6,"jsxDEV"],[82,60,59,6],[82,62,59,7,"ActivityIndicator"],[82,79,59,24],[82,80,59,24,"default"],[82,87,59,24],[83,8,59,25,"size"],[83,12,59,29],[83,14,59,30],[83,21,59,37],[84,8,59,38,"color"],[84,13,59,43],[84,15,59,44],[85,6,59,53],[86,8,59,53,"fileName"],[86,16,59,53],[86,18,59,53,"_jsxFileName"],[86,30,59,53],[87,8,59,53,"lineNumber"],[87,18,59,53],[88,8,59,53,"columnNumber"],[88,20,59,53],[89,6,59,53],[89,13,59,55],[89,14,59,56],[89,29,60,6],[89,33,60,6,"_reactJsxDevRuntime"],[89,52,60,6],[89,53,60,6,"jsxDEV"],[89,59,60,6],[89,61,60,7,"Text"],[89,65,60,11],[89,66,60,11,"default"],[89,73,60,11],[90,8,60,12,"style"],[90,13,60,17],[90,15,60,19,"styles"],[90,21,60,25],[90,22,60,26,"text"],[90,26,60,31],[91,8,60,31,"children"],[91,16,60,31],[91,18,60,32],[92,6,60,49],[93,8,60,49,"fileName"],[93,16,60,49],[93,18,60,49,"_jsxFileName"],[93,30,60,49],[94,8,60,49,"lineNumber"],[94,18,60,49],[95,8,60,49,"columnNumber"],[95,20,60,49],[96,6,60,49],[96,13,60,55],[96,14,60,56],[97,4,60,56],[98,6,60,56,"fileName"],[98,14,60,56],[98,16,60,56,"_jsxFileName"],[98,28,60,56],[99,6,60,56,"lineNumber"],[99,16,60,56],[100,6,60,56,"columnNumber"],[100,18,60,56],[101,4,60,56],[101,11,61,10],[101,12,61,11],[102,2,63,0],[103,2,63,1,"_s"],[103,4,63,1],[103,5,9,24,"CallbackScreen"],[103,19,9,38],[104,4,9,38],[104,12,10,17,"useRouter"],[104,23,10,26],[104,24,10,26,"useRouter"],[104,33,10,26],[104,35,11,17,"useLocalSearchParams"],[104,46,11,37],[104,47,11,37,"useLocalSearchParams"],[104,67,11,37],[104,69,13,51,"useAuthStore"],[104,87,13,63],[104,88,13,63,"useAuthStore"],[104,100,13,63],[105,2,13,63],[106,2,13,63,"_c"],[106,4,13,63],[106,7,9,24,"CallbackScreen"],[106,21,9,38],[107,2,65,0],[107,8,65,6,"styles"],[107,14,65,12],[107,17,65,15,"StyleSheet"],[107,27,65,25],[107,28,65,25,"default"],[107,35,65,25],[107,36,65,26,"create"],[107,42,65,32],[107,43,65,33],[108,4,66,2,"container"],[108,13,66,11],[108,15,66,13],[109,6,67,4,"flex"],[109,10,67,8],[109,12,67,10],[109,13,67,11],[110,6,68,4,"backgroundColor"],[110,21,68,19],[110,23,68,21],[110,32,68,30],[111,6,69,4,"justifyContent"],[111,20,69,18],[111,22,69,20],[111,30,69,28],[112,6,70,4,"alignItems"],[112,16,70,14],[112,18,70,16],[113,4,71,2],[113,5,71,3],[114,4,72,2,"text"],[114,8,72,6],[114,10,72,8],[115,6,73,4,"color"],[115,11,73,9],[115,13,73,11],[115,22,73,20],[116,6,74,4,"fontSize"],[116,14,74,12],[116,16,74,14],[116,18,74,16],[117,6,75,4,"marginTop"],[117,15,75,13],[117,17,75,15],[118,4,76,2],[119,2,77,0],[119,3,77,1],[119,4,77,2],[120,2,77,3],[120,6,77,3,"_c"],[120,8,77,3],[121,2,77,3,"$RefreshReg$"],[121,14,77,3],[121,15,77,3,"_c"],[121,17,77,3],[122,0,77,3],[122,3]],"functionMap":{"names":["<global>","CallbackScreen","useEffect$argument_0","processAuth"],"mappings":"AAA;eCQ;YCM;wBCC;KDoC;GDG;CDQ"},"hasCjsExports":false},"type":"js/module"}]}