{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/View","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"4kYBDC6LJJXoH7P9rWDi3vkLVB0=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Text","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"JKIzsQ5YQ0gDj0MIyY0Q7F1zJtU=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/StyleSheet","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"MK7+k1V+KnvCVW7Kj2k/ydtjmVU=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/ActivityIndicator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"bSAkUkqZq0shBb5bU6kCYXi4ciA=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":124},"end":{"line":3,"column":62,"index":186}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"../../src/services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":187},"end":{"line":4,"column":49,"index":236}}],"key":"9xSisGHPJraOzXuYGWsxOEoipwY=","exportNames":["*"],"imports":1}},{"name":"../../src/store/authStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":237},"end":{"line":5,"column":57,"index":294}}],"key":"rzvS6mOYLZFvjGcMkfDJcrjZqoQ=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/app/(auth)/callback.tsx\"; // REMINDER: DO NOT HARDCODE THE URL, OR ADD ANY FALLBACKS OR REDIRECT URLS, THIS BREAKS THE AUTH\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return CallbackScreen;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeWebDistExportsView = require(_dependencyMap[1], \"react-native-web/dist/exports/View\");\n  var View = _interopDefault(_reactNativeWebDistExportsView);\n  var _reactNativeWebDistExportsText = require(_dependencyMap[2], \"react-native-web/dist/exports/Text\");\n  var Text = _interopDefault(_reactNativeWebDistExportsText);\n  var _reactNativeWebDistExportsStyleSheet = require(_dependencyMap[3], \"react-native-web/dist/exports/StyleSheet\");\n  var StyleSheet = _interopDefault(_reactNativeWebDistExportsStyleSheet);\n  var _reactNativeWebDistExportsActivityIndicator = require(_dependencyMap[4], \"react-native-web/dist/exports/ActivityIndicator\");\n  var ActivityIndicator = _interopDefault(_reactNativeWebDistExportsActivityIndicator);\n  var _expoRouter = require(_dependencyMap[5], \"expo-router\");\n  var _srcServicesApi = require(_dependencyMap[6], \"../../src/services/api\");\n  var _srcStoreAuthStore = require(_dependencyMap[7], \"../../src/store/authStore\");\n  var _reactJsxDevRuntime = require(_dependencyMap[8], \"react/jsx-dev-runtime\");\n  function CallbackScreen() {\n    const router = (0, _expoRouter.useRouter)();\n    const params = (0, _expoRouter.useLocalSearchParams)();\n    const hasProcessed = (0, _react.useRef)(false);\n    const {\n      setUser,\n      setSessionToken,\n      setLoading\n    } = (0, _srcStoreAuthStore.useAuthStore)();\n    (0, _react.useEffect)(() => {\n      const processAuth = async () => {\n        // Prevent double processing\n        if (hasProcessed.current) return;\n        hasProcessed.current = true;\n        try {\n          // Get session_id from params or URL hash\n          let sessionId = params.session_id;\n          if (!sessionId && false) {\n            const hash = window.location.hash;\n            const match = hash.match(/session_id=([^&]+)/);\n            sessionId = match ? match[1] : '';\n          }\n          if (!sessionId) {\n            console.error('No session_id found');\n            router.replace('/login');\n            return;\n          }\n\n          // Exchange session_id for session data\n          const data = await _srcServicesApi.authApi.exchangeSession(sessionId);\n\n          // Store user and token\n          setUser(data.user);\n          setSessionToken(data.session_token);\n\n          // Navigate to main app\n          router.replace('/(tabs)');\n        } catch (error) {\n          console.error('Auth callback error:', error);\n          router.replace('/login');\n        } finally {\n          setLoading(false);\n        }\n      };\n      processAuth();\n    }, []);\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(View.default, {\n      style: styles.container,\n      children: [/*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(ActivityIndicator.default, {\n        size: \"large\",\n        color: \"#10B981\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 7\n      }, this), /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(Text.default, {\n        style: styles.text,\n        children: \"Signing you in...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 5\n    }, this);\n  }\n  const styles = StyleSheet.default.create({\n    container: {\n      flex: 1,\n      backgroundColor: '#111827',\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n    text: {\n      color: '#9CA3AF',\n      fontSize: 16,\n      marginTop: 16\n    }\n  });\n});","lineCount":114,"map":[[4,62,7,0],[5,2,7,0,"Object"],[5,8,7,0],[5,9,7,0,"defineProperty"],[5,23,7,0],[5,24,7,0,"exports"],[5,31,7,0],[6,4,7,0,"value"],[6,9,7,0],[7,2,7,0],[8,2,7,0],[8,11,7,0,"_interopDefault"],[8,27,7,0,"e"],[8,28,7,0],[9,4,7,0],[9,11,7,0,"e"],[9,12,7,0],[9,16,7,0,"e"],[9,17,7,0],[9,18,7,0,"__esModule"],[9,28,7,0],[9,31,7,0,"e"],[9,32,7,0],[10,6,7,0,"default"],[10,13,7,0],[10,15,7,0,"e"],[11,4,7,0],[12,2,7,0],[13,2,9,15,"Object"],[13,8,9,15],[13,9,9,15,"defineProperty"],[13,23,9,15],[13,24,9,15,"exports"],[13,31,9,15],[14,4,9,15,"enumerable"],[14,14,9,15],[15,4,9,15,"get"],[15,7,9,15],[15,18,9,15,"get"],[15,19,9,15],[16,6,9,15],[16,13,9,15,"CallbackScreen"],[16,27,9,15],[17,4,9,15],[18,2,9,15],[19,2,1,0],[19,6,1,0,"_react"],[19,12,1,0],[19,15,1,0,"require"],[19,22,1,0],[19,23,1,0,"_dependencyMap"],[19,37,1,0],[20,2,1,49],[20,6,1,49,"_reactNativeWebDistExportsView"],[20,36,1,49],[20,39,1,49,"require"],[20,46,1,49],[20,47,1,49,"_dependencyMap"],[20,61,1,49],[21,2,1,49],[21,6,1,49,"View"],[21,10,1,49],[21,13,1,49,"_interopDefault"],[21,28,1,49],[21,29,1,49,"_reactNativeWebDistExportsView"],[21,59,1,49],[22,2,1,49],[22,6,1,49,"_reactNativeWebDistExportsText"],[22,36,1,49],[22,39,1,49,"require"],[22,46,1,49],[22,47,1,49,"_dependencyMap"],[22,61,1,49],[23,2,1,49],[23,6,1,49,"Text"],[23,10,1,49],[23,13,1,49,"_interopDefault"],[23,28,1,49],[23,29,1,49,"_reactNativeWebDistExportsText"],[23,59,1,49],[24,2,1,49],[24,6,1,49,"_reactNativeWebDistExportsStyleSheet"],[24,42,1,49],[24,45,1,49,"require"],[24,52,1,49],[24,53,1,49,"_dependencyMap"],[24,67,1,49],[25,2,1,49],[25,6,1,49,"StyleSheet"],[25,16,1,49],[25,19,1,49,"_interopDefault"],[25,34,1,49],[25,35,1,49,"_reactNativeWebDistExportsStyleSheet"],[25,71,1,49],[26,2,1,49],[26,6,1,49,"_reactNativeWebDistExportsActivityIndicator"],[26,49,1,49],[26,52,1,49,"require"],[26,59,1,49],[26,60,1,49,"_dependencyMap"],[26,74,1,49],[27,2,1,49],[27,6,1,49,"ActivityIndicator"],[27,23,1,49],[27,26,1,49,"_interopDefault"],[27,41,1,49],[27,42,1,49,"_reactNativeWebDistExportsActivityIndicator"],[27,85,1,49],[28,2,3,0],[28,6,3,0,"_expoRouter"],[28,17,3,0],[28,20,3,0,"require"],[28,27,3,0],[28,28,3,0,"_dependencyMap"],[28,42,3,0],[29,2,4,0],[29,6,4,0,"_srcServicesApi"],[29,21,4,0],[29,24,4,0,"require"],[29,31,4,0],[29,32,4,0,"_dependencyMap"],[29,46,4,0],[30,2,5,0],[30,6,5,0,"_srcStoreAuthStore"],[30,24,5,0],[30,27,5,0,"require"],[30,34,5,0],[30,35,5,0,"_dependencyMap"],[30,49,5,0],[31,2,5,57],[31,6,5,57,"_reactJsxDevRuntime"],[31,25,5,57],[31,28,5,57,"require"],[31,35,5,57],[31,36,5,57,"_dependencyMap"],[31,50,5,57],[32,2,9,15],[32,11,9,24,"CallbackScreen"],[32,25,9,38,"CallbackScreen"],[32,26,9,38],[32,28,9,41],[33,4,10,2],[33,10,10,8,"router"],[33,16,10,14],[33,19,10,17],[33,23,10,17,"useRouter"],[33,34,10,26],[33,35,10,26,"useRouter"],[33,44,10,26],[33,46,10,27],[33,47,10,28],[34,4,11,2],[34,10,11,8,"params"],[34,16,11,14],[34,19,11,17],[34,23,11,17,"useLocalSearchParams"],[34,34,11,37],[34,35,11,37,"useLocalSearchParams"],[34,55,11,37],[34,57,11,38],[34,58,11,39],[35,4,12,2],[35,10,12,8,"hasProcessed"],[35,22,12,20],[35,25,12,23],[35,29,12,23,"useRef"],[35,35,12,29],[35,36,12,29,"useRef"],[35,42,12,29],[35,44,12,30],[35,49,12,35],[35,50,12,36],[36,4,13,2],[36,10,13,8],[37,6,13,10,"setUser"],[37,13,13,17],[38,6,13,19,"setSessionToken"],[38,21,13,34],[39,6,13,36,"setLoading"],[40,4,13,47],[40,5,13,48],[40,8,13,51],[40,12,13,51,"useAuthStore"],[40,30,13,63],[40,31,13,63,"useAuthStore"],[40,43,13,63],[40,45,13,64],[40,46,13,65],[41,4,15,2],[41,8,15,2,"useEffect"],[41,14,15,11],[41,15,15,11,"useEffect"],[41,24,15,11],[41,26,15,12],[41,32,15,18],[42,6,16,4],[42,12,16,10,"processAuth"],[42,23,16,21],[42,26,16,24],[42,32,16,24,"processAuth"],[42,33,16,24],[42,38,16,36],[43,8,17,6],[44,8,18,6],[44,12,18,10,"hasProcessed"],[44,24,18,22],[44,25,18,23,"current"],[44,32,18,30],[44,34,18,32],[45,8,19,6,"hasProcessed"],[45,20,19,18],[45,21,19,19,"current"],[45,28,19,26],[45,31,19,29],[45,35,19,33],[46,8,21,6],[46,12,21,10],[47,10,22,8],[48,10,23,8],[48,14,23,12,"sessionId"],[48,23,23,21],[48,26,23,24,"params"],[48,32,23,30],[48,33,23,31,"session_id"],[48,43,23,51],[49,10,25,8],[49,14,25,12],[49,15,25,13,"sessionId"],[49,24,25,22],[49,33,25,55],[49,35,25,57],[50,12,26,10],[50,18,26,16,"hash"],[50,22,26,20],[50,25,26,23,"window"],[50,31,26,29],[50,32,26,30,"location"],[50,40,26,38],[50,41,26,39,"hash"],[50,45,26,43],[51,12,27,10],[51,18,27,16,"match"],[51,23,27,21],[51,26,27,24,"hash"],[51,30,27,28],[51,31,27,29,"match"],[51,36,27,34],[51,37,27,35],[51,57,27,55],[51,58,27,56],[52,12,28,10,"sessionId"],[52,21,28,19],[52,24,28,22,"match"],[52,29,28,27],[52,32,28,30,"match"],[52,37,28,35],[52,38,28,36],[52,39,28,37],[52,40,28,38],[52,43,28,41],[52,45,28,43],[53,10,29,8],[54,10,31,8],[54,14,31,12],[54,15,31,13,"sessionId"],[54,24,31,22],[54,26,31,24],[55,12,32,10,"console"],[55,19,32,17],[55,20,32,18,"error"],[55,25,32,23],[55,26,32,24],[55,47,32,45],[55,48,32,46],[56,12,33,10,"router"],[56,18,33,16],[56,19,33,17,"replace"],[56,26,33,24],[56,27,33,25],[56,35,33,33],[56,36,33,34],[57,12,34,10],[58,10,35,8],[60,10,37,8],[61,10,38,8],[61,16,38,14,"data"],[61,20,38,18],[61,23,38,21],[61,29,38,27,"authApi"],[61,44,38,34],[61,45,38,34,"authApi"],[61,52,38,34],[61,53,38,35,"exchangeSession"],[61,68,38,50],[61,69,38,51,"sessionId"],[61,78,38,60],[61,79,38,61],[63,10,40,8],[64,10,41,8,"setUser"],[64,17,41,15],[64,18,41,16,"data"],[64,22,41,20],[64,23,41,21,"user"],[64,27,41,25],[64,28,41,26],[65,10,42,8,"setSessionToken"],[65,25,42,23],[65,26,42,24,"data"],[65,30,42,28],[65,31,42,29,"session_token"],[65,44,42,42],[65,45,42,43],[67,10,44,8],[68,10,45,8,"router"],[68,16,45,14],[68,17,45,15,"replace"],[68,24,45,22],[68,25,45,23],[68,34,45,32],[68,35,45,33],[69,8,46,6],[69,9,46,7],[69,10,46,8],[69,17,46,15,"error"],[69,22,46,20],[69,24,46,22],[70,10,47,8,"console"],[70,17,47,15],[70,18,47,16,"error"],[70,23,47,21],[70,24,47,22],[70,46,47,44],[70,48,47,46,"error"],[70,53,47,51],[70,54,47,52],[71,10,48,8,"router"],[71,16,48,14],[71,17,48,15,"replace"],[71,24,48,22],[71,25,48,23],[71,33,48,31],[71,34,48,32],[72,8,49,6],[72,9,49,7],[72,18,49,16],[73,10,50,8,"setLoading"],[73,20,50,18],[73,21,50,19],[73,26,50,24],[73,27,50,25],[74,8,51,6],[75,6,52,4],[75,7,52,5],[76,6,54,4,"processAuth"],[76,17,54,15],[76,18,54,16],[76,19,54,17],[77,4,55,2],[77,5,55,3],[77,7,55,5],[77,9,55,7],[77,10,55,8],[78,4,57,2],[78,24,58,4],[78,28,58,4,"_reactJsxDevRuntime"],[78,47,58,4],[78,48,58,4,"jsxDEV"],[78,54,58,4],[78,56,58,5,"View"],[78,60,58,9],[78,61,58,9,"default"],[78,68,58,9],[79,6,58,10,"style"],[79,11,58,15],[79,13,58,17,"styles"],[79,19,58,23],[79,20,58,24,"container"],[79,29,58,34],[80,6,58,34,"children"],[80,14,58,34],[80,30,59,6],[80,34,59,6,"_reactJsxDevRuntime"],[80,53,59,6],[80,54,59,6,"jsxDEV"],[80,60,59,6],[80,62,59,7,"ActivityIndicator"],[80,79,59,24],[80,80,59,24,"default"],[80,87,59,24],[81,8,59,25,"size"],[81,12,59,29],[81,14,59,30],[81,21,59,37],[82,8,59,38,"color"],[82,13,59,43],[82,15,59,44],[83,6,59,53],[84,8,59,53,"fileName"],[84,16,59,53],[84,18,59,53,"_jsxFileName"],[84,30,59,53],[85,8,59,53,"lineNumber"],[85,18,59,53],[86,8,59,53,"columnNumber"],[86,20,59,53],[87,6,59,53],[87,13,59,55],[87,14,59,56],[87,29,60,6],[87,33,60,6,"_reactJsxDevRuntime"],[87,52,60,6],[87,53,60,6,"jsxDEV"],[87,59,60,6],[87,61,60,7,"Text"],[87,65,60,11],[87,66,60,11,"default"],[87,73,60,11],[88,8,60,12,"style"],[88,13,60,17],[88,15,60,19,"styles"],[88,21,60,25],[88,22,60,26,"text"],[88,26,60,31],[89,8,60,31,"children"],[89,16,60,31],[89,18,60,32],[90,6,60,49],[91,8,60,49,"fileName"],[91,16,60,49],[91,18,60,49,"_jsxFileName"],[91,30,60,49],[92,8,60,49,"lineNumber"],[92,18,60,49],[93,8,60,49,"columnNumber"],[93,20,60,49],[94,6,60,49],[94,13,60,55],[94,14,60,56],[95,4,60,56],[96,6,60,56,"fileName"],[96,14,60,56],[96,16,60,56,"_jsxFileName"],[96,28,60,56],[97,6,60,56,"lineNumber"],[97,16,60,56],[98,6,60,56,"columnNumber"],[98,18,60,56],[99,4,60,56],[99,11,61,10],[99,12,61,11],[100,2,63,0],[101,2,65,0],[101,8,65,6,"styles"],[101,14,65,12],[101,17,65,15,"StyleSheet"],[101,27,65,25],[101,28,65,25,"default"],[101,35,65,25],[101,36,65,26,"create"],[101,42,65,32],[101,43,65,33],[102,4,66,2,"container"],[102,13,66,11],[102,15,66,13],[103,6,67,4,"flex"],[103,10,67,8],[103,12,67,10],[103,13,67,11],[104,6,68,4,"backgroundColor"],[104,21,68,19],[104,23,68,21],[104,32,68,30],[105,6,69,4,"justifyContent"],[105,20,69,18],[105,22,69,20],[105,30,69,28],[106,6,70,4,"alignItems"],[106,16,70,14],[106,18,70,16],[107,4,71,2],[107,5,71,3],[108,4,72,2,"text"],[108,8,72,6],[108,10,72,8],[109,6,73,4,"color"],[109,11,73,9],[109,13,73,11],[109,22,73,20],[110,6,74,4,"fontSize"],[110,14,74,12],[110,16,74,14],[110,18,74,16],[111,6,75,4,"marginTop"],[111,15,75,13],[111,17,75,15],[112,4,76,2],[113,2,77,0],[113,3,77,1],[113,4,77,2],[114,0,77,3],[114,3]],"functionMap":{"names":["<global>","CallbackScreen","useEffect$argument_0","processAuth"],"mappings":"AAA;eCQ;YCM;wBCC;KDoC;GDG;CDQ"},"hasCjsExports":false},"type":"js/module"}]}